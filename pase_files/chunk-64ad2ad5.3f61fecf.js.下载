(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64ad2ad5"],{"0f7c":function(e,t,s){"use strict";var r=s("60db"),i=s.n(r);i.a},"1a8e":function(e,t,s){},5897:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"empty"},[s("img",{attrs:{src:e.imgPath,alt:""}}),e._t("default")],2)},i=[],n={props:{},components:{},data:function(){return{visible:!1,imgPath:s("e01f")}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{}},a=n,c=(s("7ab6"),s("2877")),o=Object(c["a"])(a,r,i,!1,null,"59f18389",null);t["a"]=o.exports},"60db":function(e,t,s){},"7ab6":function(e,t,s){"use strict";var r=s("1a8e"),i=s.n(r);i.a},"8c2e":function(e,t,s){"use strict";var r=s("e174"),i=s.n(r);i.a},"90d7":function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create_group"},[r("div",{staticClass:"groups_title"},[r("span",{staticClass:"back cancel",on:{click:e.goBack}},[e._v("取消")]),r("span",{staticClass:"title"},[e._v(e._s(e.isNewGroup?"创建讨论组":"添加成员"))]),r("span",{staticClass:"icon confirm",on:{click:e.confirm}},[e._v(e._s(e.confirmText()))])]),e.isNewGroup?r("div",{staticClass:"new_group_name"},[r("label",{attrs:{for:"newGroupName"}},[e._v("讨论组名称")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newGroupName,expression:"newGroupName"}],staticClass:"group_name_input",attrs:{placeholder:"请输入群名"},domProps:{value:e.newGroupName},on:{change:function(t){return e.checkGroupName(e.newGroupName)},input:function(t){t.target.composing||(e.newGroupName=t.target.value)}}})]):e._e(),r("div",{staticClass:"input_container"},[r("div",{staticClass:"choosed",attrs:{id:"choosed"}},[r("ul",e._l(e.userIds,function(t,i){return r("li",{key:i,staticClass:"user_list",on:{click:function(s){return e.changeImUserList(t)}}},[r("span",{staticClass:"user_select selected"},[r("img",{staticClass:"avatar",attrs:{src:s("fd0c"),alt:""}}),r("span",{staticClass:"name_ellipsis"},[e._v(e._s(e.userNameList.get(t)))])])])}),0)]),r("span",{staticClass:"icon",attrs:{title:"搜索成员"},on:{click:e.filteredSortUser}},[r("svg-icon",{attrs:{"icon-class":"search"}})],1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],staticClass:"input_flexible",attrs:{placeholder:"搜索"},domProps:{value:e.searchString},on:{change:e.filteredSortUser,click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filteredSortUser(t)},input:function(t){t.target.composing||(e.searchString=t.target.value)}}})]),r("div",{staticClass:"group_member",class:e.isNewGroup?"new":""},[e.filteredSortUserList&&e.filteredSortUserList.length>0?r("div",{staticClass:"to_choose"},[r("ul",[e._l(e.filteredSortUserList,function(t){return[r("li",{key:t.initial,staticClass:"letter"},[e._v(e._s(t.initial))]),e._l(t.data,function(i,n){return[e.isNewGroup||!e.fImuserList.get(i.imUserId)?r("li",{key:t.initial+n,staticClass:"user_list",on:{click:function(t){return e.changeImUserList(i.id)}}},[r("span",{staticClass:"user_select",class:e.userIds.indexOf(i.id)>-1?"selected":"unselected"},[e.userIds.indexOf(i.id)>-1?r("svg-icon",{staticClass:"selected",attrs:{"icon-class":"selected1"}}):r("svg-icon",{staticClass:"unselected",attrs:{"icon-class":"unselected"}})],1),r("span",{staticClass:"user_info"},[r("img",{staticClass:"avatar",attrs:{src:s("fd0c"),alt:""}}),e._v(e._s(i.name)+"\n              ")])]):r("li",{key:t.initial+n,staticClass:"user_list cursor_disable"},[r("span",{staticClass:"user_select unselected_ismember"},[r("svg-icon",{staticClass:"unselected_ismember",attrs:{"icon-class":"selected1"}})],1),r("span",{staticClass:"user_info"},[r("img",{staticClass:"avatar",attrs:{src:s("fd0c"),alt:""}}),e._v(e._s(i.name)+"\n              ")])])]})]})],2)]):r("empty",[r("p",{staticClass:"tips"},[e._v("暂无可选群员")])])],1)])},i=[],n=(s("8e6e"),s("456d"),s("96cf"),s("3b8d")),a=s("bd86"),c=(s("ac6a"),s("5df3"),s("f400"),s("5880")),o=s("86e5"),u=s("5897"),l=s("1ed6"),d=s("cf45");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(s,!0).forEach(function(t){Object(a["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var m={mixins:[o["a"]],props:{isNewGroup:{type:Boolean,default:!1},groupName:{type:String,default:""},fImuserList:{type:Map},groupId:{type:String}},components:{empty:u["a"]},data:function(){return{resourceId:this.$route.query.resourceId||this.$route.query.id,newGroupName:"",searchString:"",selectedMember:[],userIds:[],groupChatId:"",filteredSortUserList:[],groupNameIsValid:!0,sortUserList:[]}},computed:{},watch:{groupId:function(e){this.groupChatId=e}},created:function(){this.dataInit()},mounted:function(){this.newGroupName=""},beforeDestroy:function(){},destroyed:function(){},methods:p({},Object(c["mapMutations"])(["SET_HASGROPUNEWS","SET_HASUNREADMAP"]),Object(a["a"])({dataInit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUsers();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.$emit("close")},changeImUserList:function(e){var t=this,s=this.userIds.indexOf(e);s>-1?this.userIds.splice(s,1):(this.userIds.push(e),this.$nextTick(function(){t.scrollToRight("choosed")}))},submitCreateGroupForm:function(){var e=this;if(this.newGroupName||(this.newGroupName=this.groupName),this.userIds.length){var t={resourceId:this.resourceId,title:this.newGroupName,userIds:this.userIds};Object(l["e"])(t).then(function(t){console.log(t),e.$dialog.alert({message:"创建成功"}),e.$emit("createGroupSuccess"),e.newGroupName="",e.userIds=[]}).catch(function(t){e.$dialog.alert({message:t.message})})}else this.$dialog.alert({message:"请选择成员"})},addUserConfirm:function(){var e=this;if(this.userIds.length){var t={groupChatId:this.groupId,userIds:this.userIds};Object(l["d"])(t).then(function(t){console.log(t),e.$dialog.alert({message:"添加成功"}),e.$emit("updateGroupChatDetail",e.groupId),e.userIds=[]}).catch(function(t){e.$dialog.alert({message:t.message})})}else this.$dialog.alert({message:"请选择要添加成员"})},filteredSortUser:function(){var e=Object(d["a"])(this.sortUserList),t=this.searchString;t?(t=t.trim().toLowerCase(),!e||e.length<1?this.filteredSortUserList=[]:(e=e.filter(function(e){var s=e.data.filter(function(e){if(-1!==e.name.toLowerCase().indexOf(t))return e});if(s.length>0)return e.data=s,e}),this.filteredSortUserList=e)):this.filteredSortUserList=e||[]},getUsers:function(){var e=this,t={resourceId:this.$route.query.resourceId||this.selectedGroup.resourceId};Object(l["c"])(t).then(function(t){if(t){var s=new Map,r=[];r=t.filter(function(e){return null!==e&&e.name}),t.forEach(function(e){s.set(e.id,e.name)}),e.userNameList=s,e.sortUserList=Object(d["b"])(r),e.filteredSortUser()}else e.userList=[]})},goBack:function(){this.$emit("goBack")},confirm:function(){this.isNewGroup?this.submitCreateGroupForm():this.addUserConfirm()},confirmText:function(){return this.userIds.length<1?"确定":"确定(".concat(this.userIds.length,")")}},"dataInit",function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUsers(this.resourceId);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()))},h=m,g=(s("0f7c"),s("8c2e"),s("2877")),v=Object(g["a"])(h,r,i,!1,null,"095b722c",null);t["a"]=v.exports},cf45:function(e,t,s){"use strict";s.d(t,"a",function(){return i}),s.d(t,"b",function(){return n});s("ac6a"),s("4f7f"),s("5df3"),s("1c4c"),s("55dd"),s("3b2b"),s("28a5");var r=s("7618");function i(e){if(null!=e){var t=Array.isArray(e)?[]:{};for(var s in e)e.hasOwnProperty(s)&&("object"===Object(r["a"])(e[s])?t[s]=i(e[s]):t[s]=e[s]);return t}}function n(e){var t=[];if(e&&(t=e),0!=t.length){if(!String.prototype.localeCompare)return null;var s,r="*ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i="#啊八擦哒额发噶哈#级卡啦吗那哦爬器然撒他##哇西呀咋".split(""),n=[],a={},c=/[^\u4e00-\u9fa5]/,o=new RegExp("[`\\-~!@#$^&*()=|{}':;',\\[\\].<>《》/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？12345678990]");return r.filter(function(e,a){s={initial:"",data:[]},t.map(function(t){if(o.test(t.name[0]))0==a&&s.data.push(t);else if(c.test(t.name[0]))t.name[0].toUpperCase()==e&&s.data.push(t);else{if("#"==i[a])return;var r=t.name[0];r.localeCompare(i[a],"zh")>=0&&("#"!=i[a+1]?r.localeCompare(i[a+1],"zh")<0&&s.data.push(t):"#"!=i[a+2]?r.localeCompare(i[a+2],"zh")<0&&s.data.push(t):r.localeCompare(i[a+3],"zh")<0&&s.data.push(t))}}),s.data.length&&(s.initial=r[a],n.push(s),s.data.sort(function(e,t){return e.name.localeCompare(t.name,"zh")}))}),a.segs=Array.from(new Set(n)),a.segs}}},e01f:function(e,t,s){e.exports=s.p+"img/groups_empty.b95c9285.png"},e174:function(e,t,s){}}]);
//# sourceMappingURL=chunk-64ad2ad5.3f61fecf.js.map