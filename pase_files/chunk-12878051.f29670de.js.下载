(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12878051"],{"0d1c":function(e,t,s){"use strict";var a=s("2c30"),n=s.n(a);n.a},"2c30":function(e,t,s){},"2fcf":function(e,t){e.exports="data:image/gif;base64,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"},"4df5":function(e,t,s){},5574:function(e,t,s){"use strict";var a=s("7e9f"),n=s.n(a);n.a},5964:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message_list",attrs:{id:"messages"}},[e.selectedGroupDetail.resourceName?a("div",{staticClass:"discuss_object"},[a("span",{staticClass:"label"},[e._v("讨论对象:")]),a("span",{staticClass:"name"},[e._v(e._s(e.resourceTypeArr[e.selectedGroup.resourceType]+"-"+e.selectedGroupDetail.resourceName))])]):e._e(),e.imUserNameList.size>0?[a("van-pull-refresh",{on:{refresh:e.onFresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[a("div",{staticClass:"messages_container"},e._l(e.messageList,function(t,n){return a("div",{key:n,staticClass:"message_item"},[0!==t.msgType&&1!==t.msgType&&2!==t.msgType||!(0===n||e.messageList[n].createTime-e.messageList[n-1].createTime>3e5)?e._e():a("p",{staticClass:"time"},[e._v(e._s(e.formatDate(new Date(t.createTime),"yyyy-MM-dd HH:mm:ss")))]),6===t.msgType?a("div",{staticClass:"join_notice"},["1"===JSON.parse(t.content).notifyType&&t.createTime==e.selectedGroupDetail.joinedTime?[a("p",{staticClass:"time"},[e._v(e._s(e.formatDate(new Date(t.createTime),"yyyy-MM-dd HH:mm:ss")))]),a("p",[e._v("您加入了讨论组")]),e.showCreateMember(JSON.parse(t.content).groupMembers)?a("p",[e._v(e._s(e.showCreateMember(JSON.parse(t.content).groupMembers)))]):e._e()]:e._e(),"2"===JSON.parse(t.content).notifyType&&t.createTime>=e.selectedGroupDetail.joinedTime?[JSON.parse(t.content).newMembers.indexOf(e.myid)>-1||e.showAddMember(JSON.parse(t.content).newMembers,t.from)?a("p",{staticClass:"time"},[e._v(e._s(e.formatDate(new Date(t.createTime),"yyyy-MM-dd HH:mm:ss")))]):e._e(),JSON.parse(t.content).newMembers.indexOf(e.myid)>-1?a("p",[e._v(e._s(e.imUserNameList.get(t.from)+"邀请您加入了讨论组"))]):e._e(),e.showAddMember(JSON.parse(t.content).newMembers,t.from)?a("p",[e._v(e._s(e.showAddMember(JSON.parse(t.content).newMembers,t.from)))]):e._e()]:e._e()],2):e._e(),0===t.msgType||1===t.msgType||2===t.msgType?a("div",{key:n,class:t.from!=e.myid?"others_message":"my_message"},[a("img",{staticClass:"avatar",attrs:{src:s("fd0c"),alt:""}}),a("div",{staticClass:"con"},[a("p",{staticClass:"user_name"},[e._v(e._s(e.getUserName(t.from)))]),a("div",{staticClass:"message_detail",class:1===t.msgType?"no_padding":""},[0===t.msgType?a("pre",{domProps:{innerHTML:e._s(e.linksReplace(t.content))},on:{click:function(s){return e.copy(t.content)}}}):1===t.msgType?a("img",{attrs:{src:JSON.parse(t.content).url,alt:""},on:{click:function(s){return e.changeCurrentImg(t.content)}}}):e._e(),2===t.msgType?a("dl",{staticClass:"message_file"},[a("dt",{staticClass:"file",attrs:{title:"文件"}},[a("img",{attrs:{src:s("61bf"),alt:""}})]),a("dd",{staticClass:"detail"},[a("h5",{staticClass:"title"},[e._v(e._s(JSON.parse(t.content).filename))]),a("h6",{staticClass:"clearfix"},[e._v(e._s(e.fileSize(JSON.parse(t.content).size))+"\n                      "),a("span",{staticClass:"txt_btn",on:{click:function(s){e.download(JSON.parse(t.content).fileId)}}},[e._v("下载")])])])]):e._e(),t.msgId&&t.from==e.myid&&e.msgIdMap.has(t.msgId)?a("span",{staticClass:"status",class:"status"+e.msgIdMap.get(t.msgId)},[1===e.msgIdMap.get(t.msgId)?a("img",{attrs:{src:s("2fcf"),alt:""}}):e._e(),3===e.msgIdMap.get(t.msgId)?a("svg-icon",{attrs:{"icon-class":"fasongshibai"}}):e._e()],1):e._e()])])]):e._e()])}),0)]),e.notify?a("p",{staticClass:"more_messages notify"},[e._v(e._s(e.notify))]):e._e()]:e._e(),a("van-image-preview",{attrs:{images:e.currentImg,showIndex:!1},model:{value:e.imgPreviewShow,callback:function(t){e.imgPreviewShow=t},expression:"imgPreviewShow"}}),e.selectedGroup.imGroupChatId&&e.unReadCount>20?a("div",{staticClass:"all_unread_news",on:{click:function(t){return e.getGroupUnreadHistory(e.selectedGroup.imGroupChatId)}}},[a("span",{staticClass:"icon",attrs:{title:"向上"}},[a("svg-icon",{attrs:{"icon-class":"xiangshang"}})],1),e._v(e._s(e.unReadCount)+"条新消息")]):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(e.messageFlag))]),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.copyInputCon,expression:"copyInputCon"}],attrs:{type:"text",id:"copyInput"},domProps:{value:e.copyInputCon},on:{input:function(t){t.target.composing||(e.copyInputCon=t.target.value)}}})],2)},n=[],i=(s("ac6a"),s("a481"),s("96cf"),s("3b8d")),o=s("c1df"),r=s.n(o),c=s("86e5"),m=s("1ed6"),l={mixins:[c["a"]],components:{},data:function(){return{currentImg:[],imgPreviewShow:!1,isLoading:!1,resourceTypeArr:["","主题","卡片","画面","图","表"],copyInputCon:""}},computed:{},created:function(){this.dataInit()},mounted:function(){this.imGroupChatId=this.selectedGroup.imGroupChatId,this.getHistory(this.imGroupChatId)},beforeDestroy:function(){},destroyed:function(){},methods:{dataInit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getAllUsers();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),formatDate:function(e){return r()(e).format("YYYY-MM-DD HH:mm:ss")},getUserName:function(e){var t="查无此人";if(this.myid==e){var s=JSON.parse(window.localStorage.getItem("PA_USERINFO"))||{};t=s.name}else this.imUserNameList&&(t=this.imUserNameList.get(e)||"无名氏");return t},linksReplace:function(e){var t=/(((https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/gi,s=e.replace(t,function(e){return"<a href='"+e+"' target='_blank'>"+e+"</a>"});return s},fileSize:function(e){return e>1048576?(e/1024/1024).toFixed(2)+"M":e>1024?(e/1024).toFixed(2)+"K":e+"字节"},changeCurrentImg:function(e){var t=JSON.parse(e).url;this.currentImg=[t],this.imgPreviewShow=!0},download:function(e){window.open(Object(m["a"])(e),"_blank")},onFresh:function(){var e=this;setTimeout(function(){e.getHistory(e.imGroupChatId,!0,!0)},300)},showCreateMember:function(e){var t=this,s="",a=[];return e.forEach(function(e){e!==t.myid&&a.push(t.imUserNameList.get(e))}),a.length<1?"":(a.length<=5?s+=a.join("、"):(s=a.slice(0,5).join("、"),s+="等人"),s+="加入了讨论组",s)},showAddMember:function(e,t){var s="",a=this.showCreateMember(e);return t!==this.myid?s=a:a&&(s="您邀请"+a),s},copy:function(e){var t=this.linksReplace(e),s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select();try{var a=document.execCommand("copy");console.log(a)}catch(n){console.log(n)}document.body.removeChild(s),this.$dialog.alert({message:"复制成功"})},downloadAs:function(e){for(var t=window.open(e,"","width=1,   height=1,   top=5000,   left=5000");"complete"!=t.document.readyState;)if("complete"==t.document.readyState)break;t.document.execCommand("SaveAs"),t.close()}}},d=l,g=(s("5574"),s("2877")),u=Object(g["a"])(d,a,n,!1,null,"2efde223",null);t["a"]=u.exports},"5a74":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"send_message"},[2===e.sendMethodValue?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sendMesageForm.message,expression:"sendMesageForm.message"}],staticClass:"message_textarea",attrs:{type:"textarea",placeholder:"请输入内容",resize:"none",spellcheck:"false"},domProps:{value:e.sendMesageForm.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submitSendMesageForm("sendMesageForm"):null},input:function(t){t.target.composing||e.$set(e.sendMesageForm,"message",t.target.value)}}}):s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sendMesageForm.message,expression:"sendMesageForm.message"}],staticClass:"message_textarea",attrs:{type:"textarea",placeholder:"请输入内容",resize:"none",spellcheck:"false"},domProps:{value:e.sendMesageForm.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitSendMesageForm("sendMesageForm")},focus:function(t){e.showSendTop=!1},input:function(t){t.target.composing||e.$set(e.sendMesageForm,"message",t.target.value)}}}),s("div",{staticClass:"send_container"},[e.sendMesageForm.message?s("span",{staticClass:"txt",attrs:{title:"发送文本"},on:{click:function(t){return e.submitSendMesageForm("sendMesageForm")}}},[e._v("\n        发送\n      ")]):s("span",{staticClass:"icon",attrs:{title:"发送文件"},on:{click:function(t){e.showSendTop=!e.showSendTop}}},[s("svg-icon",{attrs:{"icon-class":"small-add"}})],1)]),e.showSendTop?s("div",{staticClass:"send_top"},[s("van-uploader",{ref:"uploadImg",staticClass:"upload",attrs:{accept:"image/*","after-read":e.beforeImageUpload}},[s("span",{staticClass:"icon",attrs:{title:"发送图片"}},[s("svg-icon",{attrs:{"icon-class":"tianjiatupian"}}),s("p",[e._v("照片")])],1)]),s("van-uploader",{ref:"uploadImg",staticClass:"upload",attrs:{"after-read":e.beforeImageUpload,accept:"image/*",capture:"camera"}},[s("span",{staticClass:"icon",attrs:{title:"发送图片"}},[s("svg-icon",{attrs:{"icon-class":"tianjiatupian"}}),s("p",[e._v("拍摄")])],1)]),s("van-uploader",{ref:"uploadF",staticClass:"upload",attrs:{"after-read":e.beforeFileUpload,accept:".jpg,.jpeg,.gif,.png,.xlsx,.xlx,.docx,.pdf"}},[s("span",{staticClass:"icon",attrs:{title:"发送文件"}},[s("svg-icon",{attrs:{"icon-class":"fasongwenjian"}}),s("p",[e._v("文件")])],1)])],1):e._e()])},n=[],i=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("a481"),s("86e5")),r=s("1ed6");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach(function(t){Object(i["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var l={mixins:[o["a"]],props:{},components:{},data:function(){return{sendMesageForm:{message:""},sendMesageFormRules:{message:[{required:!0,message:"请填写消息内容",trigger:"blur"}]},hovering:!1,sendMethods:[{id:1,value:1,text:"按Enter发送"},{id:2,value:2,text:"按Ctrl+Enter发送"}],sendMethodValue:1,fileClass:{fileClass:"im"},showSendTop:!1}},computed:{},watch:{selectedGroup:function(e){this.imGroupChatId=e.imGroupChatId}},created:function(){},mounted:function(){this.imGroupChatId=this.selectedGroup.imGroupChatId},beforeDestroy:function(){},destroyed:function(){},methods:{scrollToBottom:function(){var e=document.getElementById("messages"),t=e.scrollHeight;e.scrollTop=t+500},submitSendMesageForm:function(e){var t=this.sendMesageForm.message;if(!t)return!1;var s=t.replace(/^(\s+|\r+|\n+|\\s+)|(\s+|\r+|\n+|\\s+)$/g,"");s&&this.sendMessage(this.sendMesageForm.message,this.imGroupChatId)},sendMessage:function(e,t){var s=this,a=this.QIM.getId(),n=new this.QIM.message("txt",a);this.SET_MSGIDMAP({msgId:a,status:1}),n.set({group_id:t,msgId:a,chatType:1,msgType:0,content:e,success:function(){console.log("success"),s.SET_MSGIDMAP({msgId:a,status:2}),s.$forceUpdate()},fail:function(){console.log("fail"),s.SET_MSGIDMAP({msgId:a,status:3}),s.$forceUpdate()}}),this.QIM.send(n.body);var i=new Date;this.PUSH_MESSAGELIST({createTime:i.getTime(),from:window.localStorage.getItem("myid"),msgId:a,content:e,msgType:0}),this.sendMesageForm.message="",this.$nextTick(function(){s.scrollToBottom()})},externalUpload:function(e,t){var s=this,a=this.QIM.getId(),n=new this.QIM.message("webFile",a),i={url:"".concat(this.imgUrl(e.filePath),"?filename=")+e.name,filename:e.name,size:e.fileSize,filetype:e.fileType,fileId:e.fileId};n.set({webFile:i,msgType:t,group_id:this.imGroupChatId,chatType:1,fail:function(){console.log("外部发送失败!!!"),s.SET_MSGIDMAP({msgId:a,status:3}),s.$forceUpdate()},success:function(){console.log("外部发送成功!!!"),s.SET_MSGIDMAP({msgId:a,status:2}),s.$forceUpdate()}}),this.showSendTop=!1;var o=new Date;this.PUSH_MESSAGELIST({createTime:o.getTime(),from:window.localStorage.getItem("myid"),msgId:a,content:JSON.stringify(i),msgType:t}),this.QIM.send(n.body)},beforeImageUpload:function(e){var t=this,s=e.file,a=this.getFileType(s.name),n=/(.jpeg|.png|.gif|.bmp|.jpg)$/.test(a),i=s.size<10485760;n?i?Object(r["l"])({file:e.file,fileClass:"im"}).then(function(e){if(e.filePath){var a=e;a.name=s.name,t.externalUpload(e,1)}t.showSendTop=!1}):this.$dialog.alert({message:"上传图片大小不能超过 10MB"}):this.$dialog.alert({message:"上传图片格式错误"})},beforeFileUpload:function(e){var t=this,s=e.file,a=this.getFileType(s.name),n=/(.php|.asp|.jsp|.cgi)$/.test(a),i=s.size<10485760;n?this.$dialog.alert({message:"不支持的文件类型"}):i?Object(r["l"])({file:e.file,fileClass:"im"}).then(function(e){if(e.filePath){var a=e;a.name=s.name,t.externalUpload(a,2)}t.showSendTop=!1}):this.$dialog.alert({message:"上传文件大小不能超过 10MB"})},imageChange:function(e){var t=this,s=this.QIM.utils.getFileUrl(e.target);if(!s.filename)return!1;var a={gif:1,bmp:1,jpg:1,png:1};if(a[s.filetype.toLowerCase()])if(s.data.size>10485760)this.$dialog.alert({message:"发送的图片不可超过10M"});else{var n=this.QIM.getId(),i=new this.QIM.message("img",n);this.SET_MSGIDMAP({msgId:n,status:1}),i.set({file:s,group_id:this.imGroupChatId,chatType:1,onFileUploadError:function(e){console.log("上传失败")},onFileUploadComplete:function(e){},success:function(){console.log("图片发送成功!!!"),t.SET_MSGIDMAP({msgId:n,status:2}),t.$forceUpdate()},fail:function(){console.log("图片发送失败!!!"),t.SET_MSGIDMAP({msgId:n,status:3}),t.$forceUpdate()}});var o=new Date;this.PUSH_MESSAGELIST({createTime:o.getTime(),from:window.localStorage.getItem("myid"),msgId:n,content:JSON.stringify(s),msgType:1}),this.$refs.image.value="",this.QIM.send(i.body)}else this.$dialog.alert({message:"不支持的文件类型"})},fileChange:function(e){var t=this,s=this.QIM.utils.getFileUrl(e.target);if(!s.filename)return!1;if(s.data.size>10485760)this.$dialog.alert({message:"发送的文件不可超过10M"});else{var a=this.QIM.getId(),n=new this.QIM.message("file",a);this.SET_MSGIDMAP({msgId:a,status:1}),n.set({file:s,group_id:this.imGroupChatId,chatType:1,onFileUploadError:function(e){console.log(e),console.log("上传失败")},onFileUploadComplete:function(e){},success:function(){console.log("文件发送成功!!!"),t.SET_MSGIDMAP({msgId:a,status:2}),t.$forceUpdate()},fail:function(){console.log("文件发送失败!!!"),t.SET_MSGIDMAP({msgId:a,status:3}),t.$forceUpdate()}});var i=new Date,o=m({},s,{},{size:s.data.size});this.PUSH_MESSAGELIST({createTime:i.getTime(),from:window.localStorage.getItem("myid"),msgId:a,content:JSON.stringify(o),msgType:2}),this.$refs.file.value="",this.QIM.send(n.body)}},setSendMethod:function(){this.hovering=!this.hovering},changeSendMethod:function(e){this.sendMethodValue=e.value,this.hovering=!1},getFileType:function(e){var t=e.lastIndexOf("."),s=".";return-1!=t&&(s+=e.substring(t+1).toLowerCase()),s}}},d=l,g=(s("96930"),s("0d1c"),s("2877")),u=Object(g["a"])(d,a,n,!1,null,"5a4b1ed2",null);t["a"]=u.exports},"61bf":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAXtJREFUaAXtlj1uAjEQhccoF4AyogVxjRAaGo5BKLlJaOEgIOVHnIArQINoKdKlyGQdaZG1jBZ7NHJmk9kG47Vn3/eebdkB8XSfcfzlYIWIXeK1eNdk4LbLsRtyCreoSTnF++/32/AwW+M7peVWHwmQy/lQXK8DQw4ECRAWztnmQKgC8GZ5iKcNvsUapw7ACy/2xGMshEqAFAi1ABeIdf1yUg3wA9EpllMNhHqAEmK2wVffrj4qAD4+sarr6n+vDSMKQgXAyx6AC3F3hfoLHYczwHLnP3w7iWLQKJSoIoFQUGrbAFIdkx5vCUg7mlrPEkh1THq8JSDtaGq9xicQdZU4zV2qMbXj7xdRV4baGuXL/5GApGOlc1K/jU/AAKSWAreOnUJc56TmRSVgp5CU3UQdO4UIU7J2Re0B7l0ox95p/BKKSiCHk9x11/gEDIAbvdQ8S0DKSW4dS4DrnNS8v5mAc+4o5ZB0nao2MoEWwrQ6UFoIp57X5LWFc78BeahWFOKYjtYAAAAASUVORK5CYII="},"7e9f":function(e,t,s){},96930:function(e,t,s){"use strict";var a=s("4df5"),n=s.n(a);n.a},fd0c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABHCAYAAACgTtGvAAAAAXNSR0IArs4c6QAAAeJJREFUeAHt3L1KA1EQhuEcs4p/WCipbBSsLGztvAVr70MvxM47sBPs7awEK2tLW0EbESwiqc8svDDshkPelJNv9ufJ7MlJkzJp/DW/P5+TWyhXLyXK0f61qNlaLSBUbRJWhApZ6qJQtUlYESpkqYtC1SZhRaiQpS4KVZuEFaFClrrY1aVxK3Rn3LezHutqnSgoLZRQUADGnCihoACMOVFCQQEYc6Ig1NI3nPA6e2Mf2xuPvW+CN2h/81C3R7NL4NEbof1dKz8heu90pDdcoyC0UEJBARhzooSCAjC29O3BzekhvNTlxnz0oL9QQkEBGHOihIICMOZEQaj09mBVflR3rexj4Ac/WMxHD9IKJRQUgLH0Yg7PM1hs8/UaHvshzNH+5qGmXychAC3SftcoKCqUUFAAxtJrVHbDuvN0By81XoxhczrmowcJhRIKCsCYEwWhulYWU3g/g8WcKEgrFIRK76PgeQaL/e1tvWUOTvubh/o52D3LQNH+NNSqfBmkoTKf5qL3+3iWPcQo/S7mkFkoCNW1MvrwfgaLOVGQVigIlf7WW5VH14mCEyWUUFAAxpwooaAAjDlRQkEBGEvvo+B5BouVMnnPHJz2V/8k+Pk7R/9CmLm4VnrLdHKxv16eF9f7D2zaN0EnyrPsAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=chunk-12878051.f29670de.js.map